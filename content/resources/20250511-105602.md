ğŸ“– 1 dakika [â†ª YazÄ±lar](https://blog.kurt.link/blog/)

# Systemctl in Docker

`--privileged` argÃ¼manÄ± tercih edilmediÄŸi durumlarda, gerekli mount'lar aÅŸaÄŸÄ±daki gibidir.

Systemd ile Docker Ã§alÄ±ÅŸtÄ±rmak iÃ§in gereken mount'lar aÅŸaÄŸÄ±daki gibi ayarlanabilir. AyrÄ±ca, imajdan Ã¶nce mount edilen noktalarda DISPLAY environment deÄŸiÅŸkeni ayarlanarak, container iÃ§erisinde Ã§alÄ±ÅŸtÄ±rÄ±lan GUI iÃ§erisindeki pencereler gÃ¶rÃ¼lebilir. AynÄ± zamanda, ana dizinde bulunan Share dizinine de konteyner iÃ§erisinden eriÅŸilebilir.

Sadece GUI uygulamalarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyebilmek iÃ§in aÅŸaÄŸÄ±daki ÅŸekilde container Ã§alÄ±ÅŸtÄ±rÄ±labilir:

```bash
docker run -ti -v /tmp/.X11-unix:/tmp/.X11-unix -v $XAUTHORITY:/root/.Xauthority -e DISPLAY archlinux:latest bash

```

Systemd:

```bash
docker run \
      --entrypoint=/usr/lib/systemd/systemd \
      --env container=docker \
      --mount type=bind,source=/sys/fs/cgroup,target=/sys/fs/cgroup \
      --mount type=bind,source=/sys/fs/fuse,target=/sys/fs/fuse \
      --mount type=tmpfs,destination=/tmp \
      --mount type=tmpfs,destination=/run \
      --mount type=tmpfs,destination=/run/lock \
      --net=host --name=Arch --workdir /root -ti \
      --env="DISPLAY" --volume="$HOME/.Xauthority:/root/.Xauthority:rw" -v="$HOME/Share:/root/Share" \
      archlinux:latest --log-level=info --unit=sysinit.target

```

Daha sonrasÄ±nda terminali kapatÄ±p istenilen komut `docker exec -ti Arch bash` ile interaktif shell alÄ±nabilir. SonrasÄ±nda `systemctl status` ile systemd interaksiyonlarÄ±na girilebildiÄŸi gÃ¶rÃ¼lecektir.

Container'Ä± kapatmak iÃ§in `docker stop Arch` yapmak yerine, container iÃ§erisinde `shutdown now` yapmayÄ± unutmamalÄ± :)
